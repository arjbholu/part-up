<template name="filePicker">
    <section class="pu-file-picker">
        <header class="pu-file-picker-header">
            <button type="button" class="pu-button" data-expand-picker>
                {{_ 'pages-app-partup-updates-newmessage-addmedia' }}
                <i class="picon-caret-down"></i>
            </button>
            <div class="pu-file-picker-remaining-wrap">
                <span>
                    {{_ 'pages-app-partup-updates-newmessage-counter-still' }}
                    <strong>{{imagesRemaining}} </strong>
                    {{_ 'pages-app-partup-updates-newmessage-counter-images' }}
                    {{_ 'pages-app-partup-updates-newmessage-counter-and' }}
                    <strong>{{documentsRemaining}} </strong>
                    {{_ 'pages-app-partup-updates-newmessage-counter-documents' }}
                    {{_ 'pages-app-partup-updates-newmessage-media-left' }}
                </span>
            </div>
        </header>
        <div class="pu-file-picker-content {{#unless expanded}}pu-file-picker-content-collapsed{{/unless }}">
            <div class="pu-file-picker-file-list-wrap drop-area" data-drop-area>
                <ul>
                    {{#if uploading }}
                        <li>
                            <figure class="pu-icon-loading">
                                {{> Spinner color='inverted' type='small' }}
                            </figure>
                        </li>
                    {{/if }}
                    {{#each images }}
                        <li>
                            <div class="pu-file-picker-file-wrapper">
                                    <span class="pu-file-picker-file-remove" data-remove-upload="{{ _id }}">x</span>
                                <div>
                                    <figure data-type="image" class="pu-thumbnail"
                                        style="background-image:url('{{ getImageUrl . }}')"></figure>
                                </div>
                                <div>
                                    <span>{{ name }}</span>
                                </div>
                            </div>
                        </li>
                    {{/each }}
                    {{#each documents }}
                        <li>
                            <div class="pu-file-picker-file-wrapper">
                                <span class="pu-file-picker-file-remove" data-remove-upload="{{ _id }}">x</span>
                                <div>
                                    <figure data-type="document" class="pu-doc-icon"
                                        style="background-image:url('/images/add-media-icons/{{ getSvgIcon . }}');"></figure>
                                </div>
                                <div>
                                    <span>{{ name }}</span>
                                </div>
                            </div>
                        </li>
                    {{/each }}
                </ul>
                {{#unless uploading }}
                    {{#unless haveFiles }}
                        {{#if expanded }}
                            <span class="pu-file-picker-file-list-placeholder">You can choose an uploader from the left<br/>or drop a file on this area</span>
                        {{/if }}
                    {{/unless }}
                {{/unless }}
            </div>
            <ul class="pu-file-picker-browse-list">
                <li>
                    {{_ 'filepicker-add-via' }}
                </li>
                <li>
                    {{#devicePicker controller=controller }}
                        <a class="pu-file-picker-button" data-browse-device>
                            <i class="picon-upload"></i><span>{{_ 'filepicker-device' }}</span>
                        </a>
                    {{/devicePicker }}
                </li>
                <li>
                    {{#dropboxPicker controller=controller }}
                        <a class="pu-file-picker-button" data-browse-dropbox>
                            <i class="picon-dropbox"></i><span>{{_ 'filepicker-dropbox' }}</span>
                        </a>
                    {{/dropboxPicker }}
                </li>
                <li>
                    {{#drivePicker controller=controller }}
                        <a class="pu-file-picker-button" data-browse-drive>
                            <i class="picon-drive"></i><span>{{_ 'filepicker-googledrive' }}</span>
                        </a>
                    {{/drivePicker }}
                </li>
            </ul>
        </div>
    </section>
</template>
