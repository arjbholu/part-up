<template name="filePicker">
    <section class="pu-file-picker">
        <header class="pu-file-picker-header">
            <button type="button" data-expand-picker>Attach files</button>
            <div class="pu-file-picker-remaining-wrap">
                <span>
                    {{_ 'pages-app-partup-updates-newmessage-counter-still' }}
                    <strong>{{imagesRemaining}} </strong>
                    {{_ 'pages-app-partup-updates-newmessage-counter-images' }}
                    {{_ 'pages-app-partup-updates-newmessage-counter-and' }}
                    <strong>{{documentsRemaining}} </strong>
                    {{_ 'pages-app-partup-updates-newmessage-counter-documents' }}
                    {{_ 'pages-app-partup-updates-newmessage-media-left' }}
                </span>
            </div>
        </header>
        <div>
            <ul class="pu-file-picker-browse-list {{#if expanded}}pu-file-picker-browse-list-expanded{{/if}}">
                <li>
                    {{#devicePicker controller=controller }}
                        <a class="pu-file-picker-button" data-browse-device>
                            <i class="picon-upload"></i><span>{{_ 'filepicker-device' }}</span>
                        </a>
                    {{/devicePicker }}
                </li>
                <li>
                    {{#dropboxPicker controller=controller }}
                        <a class="pu-file-picker-button" data-browse-dropbox>
                            <i class="picon-dropbox"></i><span>{{_ 'filepicker-dropbox' }}</span>
                        </a>
                    {{/dropboxPicker }}
                </li>
                <li>
                    {{#drivePicker controller=controller }}
                        <a class="pu-file-picker-button" data-browse-drive>
                            <i class="picon-drive"></i><span>{{_ 'filepicker-googledrive' }}</span>
                        </a>
                    {{/drivePicker }}
                </li>
            </ul>
            <div class="pu-file-picker-file-list-wrap {{#if expanded}}pu-file-picker-file-list-wrap-reduced{{/if}} drop-area {{#unless haveFiles}}drop-area-active{{/unless}}" data-drop-area>
                <ul >
                    {{#if uploading }}
                        <li>
                            <figure class="pu-icon-loading">
                                {{> Spinner }}
                            </figure>
                        </li>
                    {{/if }}
                    {{#each images }}
                        <li>
                            <figure data-type="image"
                                class="pu-thumbnail pu-thumbnail-removable"
                                style="background-image:url('{{ getImageUrl . }}')"
                                data-remove-upload="{{ _id }}"></figure>
                        </li>
                    {{/each }}
                    {{#each documents }}
                        <li>
                            <figure data-type="document"
                                class="pu-doc-icon pu-thumbnail-removable"
                                style="background-image:url('/images/add-media-icons/{{ getSvgIcon . }}');"
                                data-remove-upload="{{ _id }}"></figure>
                        </li>
                    {{/each }}
                </ul>
                {{#unless haveFiles }}
                    {{#if expanded }}
                        <span class="pu-file-picker-file-list-placeholder">You can choose an uploader from the left<br/>or drop a file on this area</span>
                    {{/if }}
                {{/unless }}
            </div>
        </div>
    </section>
</template>
